{% if VARS is defined %}
    {% set modalId = modalId|default(VARS.modalId) %}
    {% set modalSize = modalSize|default(VARS.modalSize) %}
{% endif %}
{% set modalConst = tagPrefix ~ modalId ~ "Modal" %}
{% if nobutton is not defined %}
    <!-- Button trigger modal -->
    <a class="btn btn-primary" role="button" href="#" data-bs-toggle="modal" data-bs-target="#{{ modalConst }}">{{ modalTitle|trans }}</a>
{% endif %}
  <!-- Modal -->
  <div class="modal fade" id="{{ modalConst }}" tabindex="-1" role="dialog" aria-labelledby="{{ modalConst }}Label" aria-hidden="true">
      <div class="modal-dialog {{ modalSize }}" role="document">
          <div class="modal-content" id="{{ modalConst }}-content">
                <div class="modal-header btn-primary">
                    <h5 class="modal-title" id="{{ modalConst }}Label">{{ modalTitle|trans }}</h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="{{ closeMessage|default('Close')}}">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            {% if noajax is defined %}
                {{ include( included|default(VARS.included) ~ '.html.twig', {
                    'modalConst': modalConst,
                    }
                ) }}
            {% else -%}
                <script>
                    var {{ modalConst }} = document.getElementById('{{ modalConst }}');

                    {{ modalConst }}.addEventListener('show.bs.modal', function (e) {
                        console.log(e.relatedTarget);
                        fetch(e.relatedTarget.dataset.url)
                        .then( response => response.text())
                        .then( body => document.getElementById('{{ modalConst }}-content').innerHTML=body );
                    }
                );
                </script>

                {% endif %}
          </div>
      </div>
  </div>
